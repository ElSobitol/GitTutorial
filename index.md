# Туториал по работе с Git

## Начало работы

Для начала работы, необходимо инициализировать сам Git

Для его инициализации введите команду  

```bash
  git init
```

## Добавление файла

Для добавления файла в Git необходимо воспользоваться командой  

```bash
git add название файла
```

Для того чтобы завершить добавление, необходимо сделать коммит  

```bash
git commit -m комментарий
```

## Клонирование существующего репозитория

Для клонирования репозитория, необходимо выполнить команду:  

```bash
git clone [url]
```

## Проверка состояния файлов

Для проверки состояния файлов, необходимо выполнить команду:

```bash
git status
```

Для того чтобы получить краткий отчет о состоянии, необходимо выполнить команду:

```bash
git status -s
```

или

```bash
git status --short
```

## Игнорирование файлов  

Для того чтобы некоторые файлы не отслеживались необходимо создать файл `.gitignore` со списком соответствующих паттернов.  

Пример:

```bash
$ cat .gitignore
*.[oa]
*~
```

Вот правила для паттернов, которые можно вставлять в файл `.gitignore`  

* Игнорируются пустые строки и строки, начинающиеся с символа `#`.  
* Работают стандартные глобальные паттерны.
* Паттерны можно заканчивать слешем (`/`), указывая папку.
* Можно инвертировать паттерн, начав его с восклицательного знака (`!`).  

Звездочка (`*`) замещает произвольное число символов.

Знак вопроса (`?`) замещает собой один символ.

Разделённые дефисом символы в квадратных скобках (`[0-9]`) указывают на диапазон символов от 0 до 9.

Две звездочки применяются для обозаначения вложенных папок: запись `a/**/z` может означать `a/z, a/b/z, a/b/c/z` и т.д.

Ещё один пример файла `.gitignore`:

```bash
# комментарий - это игнорируются
*.a # пропускать файлы, заканчивающиеся на .a
!lib.a # но отслеживать файлы lib.a, несмотря на пропуск файлов на .a
/TODO # игнорировать только корневой файл TODO, а не файлы вида subdir/TODO
build/ # игнорировать все файлы в папке build/
doc/*.txt # игнорировать doc/notes.txt, но не doc/server/arch.txt
```

>На сайте GitHub вы найдете исчерпывающий список хороших примеров файла .gitignore для десятков проектов и языков. Он находится на странице <https://github.com/github/gitignore> Им можно воспользоваться как отправной точкой для ваших собственных проектов.

## Просмотр индексированных и неиндексированных изменений

Для того чтобы посмотреть изменения между последним сохраненным и текущем состоянием файла, необходимо выполнить команду:  

```bash
git diff
```

Команда `git diff` без дополнительных параметров позволяет посмотреть, что было изменено, но пока не проиндексировано.

Чтобы посмотреть, что из проиндексированного войдет в следующий коммит, воспользуйтесь командой

```bash
git diff --staged
```

Эта команда сравнивает индексированные изменения с содержимым последней зафиксированной версии.

Чтобы посмотреть проиндексированные изменения, необходимо выполнить команду:

```bash
git diff --cached
```

## Просмотр истории версий

Для того чтобы посмотреть историю изменений, необходимо выполнить команду:

```bash
git log
```

У команды `git log` существует много параметров, позволяющих вывести именно ту информацию, которая вам требуется.  

Рассмотрим несколько самых популярных.

Одним из самых полезных является параметр `-p`, показывающий разницу, внесенную каждым коммитом. А дополнительный параметр `-2` ограничивает выводимый результат последними двумя записями:

```bash
git log -p -2
```

Ещё с командой `git log` могут использоваться группы суммирующих параметров. К примеру, для получения краткой статистики по каждой версии применяются параметр `--stat`:

```bash
git log --stat
```

Ещё одним полезным параметром является `--pretty`. Он меняет формат вывода информации. Есть несколько предустановленных вариантов. Параметр `oneline` выводит каждый коммит в одну строку, что весьма удобно при просмотре большого числа коммитов. Параметры `short`, `full` и `fuller`, практически не меняя формат вывода, определяют его детализацию.  

Наиболее интересный параметр `format`, позволяющий выводить записи журнала в выбранном вами формате. Это особенно полезно при генерации данных для машинного анализа.  
Пример:

```bash
git log --pretty=format: "%h - %an, %ar : %s"
```

Самые распространенные параметры форматирования перечислены в таблицы:  

****
**Таблица параметров команды `git log --pretty=format`:**  

|Параметр   |Описание выводимых данных      |
|:----------|:------------------------------|
| %H        | Хеш-код коммита               |
| %h        | Сокращенный хеш-код коммита   |
| %T        | Хеш-код дерева                |
| %t        | Сокращенный хеш-код дерева    |
| %P        | Хеш-код родительских коммитов |
| %p        | Сокращенный хеш-код  родительских коммитов|
| %an       | Имя автора                    |
| %ae       | Электронная почта автора      |
| %ad       | Дата создания оригинала (формат учитывает -date= option)|
| %ar       | Дата создания оригинала, в относительной форме |
| %cn       | Имя создателя версии          |
| %ce       | Электронная почта создателя версии|
| %cd       | Дата создания версии          |
| %cr       | Дата создания версии в относительном формате |
| %s        | Комментарий                   |

Параметры oneline и format особенно полезны в сочетании с командой `--graph`.

```bash
git log --pretty=format:"%h %s" --graph
```

### Ограничение вывода команды log

Более полезны параметры, устанавливающие ограничения по времени, такие как `--since` и `--until`.  
Пример команды которая выводит список коммитов за последнии две недели:

```bash
git log --since=2.weeks
```

Эта команда работает с разними форматами: можно указать как точную дату, например **2008-01-15**, так и относительную, то есть **2 года, 1 день, и 3 минуты назад**.

## Удаленные репозитории

Для совместной работы над проектами Git требуются навыки управления удаленными репозиториями. Удаленные репозитории представляют собой версии проекта, хранимые в Интернете или где-то в сети.

### Отображение удаленных репозиториев

Для просмотра уже настроенных удаленных серверов осуществляется командой:  

```bash
git remote
```

Она дает список коротких имен для всех указанных вами областей удаленной работы.

Параметр `-v` позволяет увидеть **URL**-адреса, которые Git хранит для сокращенного имени, используемого при чтении из данного удаленного репозитория и при записи в него:

```bash
git remote -v
```

### Добавление удаленных репозиториев

Чтобы добавить репозиторий под коротким именем, которое упростит дальнейшие обращения к нему, используйте команду:

```bash
git remote add [сокращенное имя] [url]
```

Теперь вместо полного URL-адреса в командную строку можно вводить имя. К примеру, для скачивания всей информации, которая есть у коллеги, но отсутствует у вас, используйте команду:

```bash
git fetch [имя удаленного репозитория]
```

## Извлечение данных из удаленных репозиториев

Как вы уже видели, извлечение данных из удаленных проектов выполняется командой `git fetch [имя удаленного репозитория]`

Важно помнить, что команда `git fetch` помещает все данные в ваш локальный репозитории, - она не выполняет автоматическое слияние с ветками, с которыми вы работаете в данный момент.

Если же у вас есть ветка, настроенная на слежение за какой-то удаленной веткой, команда `git pull` будет автоматически извлекать информацию из удаленной ветки и выполнять слияние с текущей веткой.