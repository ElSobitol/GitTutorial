# Туториал по работе с Git

## Раздел 1. Работа с локальным репозиторием 

### Начало работы

Для начала работы, необходимо инициализировать сам Git

Для его инициализации введите команду 

```
  git init
```

### Добавление файла

Для добавления файла в Git необходимо воспользоваться командой 

```
git add название файла
```

Для добавления **_всех файлов из текущего каталога_** в репозиторий введите команду:

```git add --all```

или

```git add .```

**Примечание**: если какие-то файлы из текущего каталога не должны добавляться в репозиторий, следует включить их имена в файл .gitignore

**ВАЖНО**: перед добавлением файла в репозиторий убедитесь, что последние изменения в нем сохранены

### Удаление файлов из репозитория

Для удаления файла из репозитория введите команду:

```git rm <имя файла>```

### Создание коммита

Для создания коммита введите команду:

```git commit -m "<комментарий>"```

Не стоит после каждого изменения файла делать commit. Чаще всего их создают, когда:

* Создан новый функционал

* Добавлен новый блок на верстке

* Исправлены ошибки по коду

* Вы завершили рабочий день и хотите сохранить код

Это поможет держать вашу ветки в чистоте и порядке. Тем самым, вы будете видеть историю изменений по каждому нововведению в вашем проекте, а не по каждому файлу.

### Изменение последнего коммита

```git commit --amend``` 

— это удобный способ изменить последний коммит. Она позволяет объединить проиндексированные изменения с предыдущим коммитом без создания нового коммита

### Просмотр состояния 

Для просмотра состояния текущей ветки введите команду:

```git status```

Для просмотра сделанных изменений со времени последнего коммита введите команду:

```git diff```

Для просмотра истории коммитов введите команду:

```git log```

Для просмотра истории коммитов в виде графа введите команду:

```git log --graph```

#### Откат коммитов

Для отката коммитов используется команда "git reset". Команда может использоваться с опциями "--soft", "--mixed", -"-hard"

```git reset --soft``` 

При передаче аргумента --soft выполняется обновление указателей, и на этом операция сброса останавливается. Раздел проиндексированных файлов и рабочий каталог остаются неизменными. 

```git reset --mixed``` 

**Это режим работы по умолчанию**. Указатели ссылок обновляются. Раздел проиндексированных файлов сбрасывается до состояния указанного коммита. Любые изменения, которые были отменены в разделе проиндексированных файлов, перемещаются в рабочий каталог.

```git reset --hard``` 

Происходит сброс раздела проиндексированных файлов и рабочего каталога до указанного коммита. Все предыдущие ожидающие изменения в разделе проиндексированных файлов и рабочем каталоге сбрасываются в соответствии с состоянием дерева коммитов. Это значит, что любая работа, находившаяся в состоянии ожидания в разделе проиндексированных файлов и рабочем каталоге, будет потеряна.

### Создание веток

По умолчанию репозиторий состоит из единственной ветки, которая называется **master**. Чтобы создать новую ветку, введите команду:

```git branch <имя ветки>```

Команда ```git branch``` без параметров позволяет просмотреть список существующих веток

### Переход между ветками

Для перехода между ветками используйте команду 

```git checkout <имя ветки>```

или 

```git merge <имя ветки>```

### Слияние веток

Для слияния веток используйте команду 

```git merge```

## Раздел 2. Работа с удаленными репозиториями

Перед началом работы с удаленными репозиториями необходимо зарегистрироваться на GitHub (или аналогичном сервисе).

### Копирование удаленного репозитория на свой ПК

Скопировать удаленный репозиторий на свой ПК можно командой git clone:

```git clone <путь к удаленному репозиторию>```

**ВАЖНО**: при этом не следует вводить команду ```git init```, так как ```git clone``` инициализирует репозиторий самостоятельно 

### Создание нового удаленного репозитория

Создать удаленный репозиторий можно через [сайт Github](GitHub.com). Для этого надо открыть выпадающее меню в верхнем правом углу любой страницы, и выбрать New repository. В открывшейся форме надо:

- задать имя репозитория;
- при желании ввести его описание;
- выбрать доступ к репозиторию: публичный, ограниченный или приватный.

После ввода данных завершить создание репозитория, нажав *Create repository* 

### Создание локальной копии (cloning) репозитория 

Для создания локальной копии удаленного репозитория:

1. На [сайте Github](GitHub.com) перейти в главную страницу репозитория и нажать *Code*

2. В открывшейся форме скопировать URL репозитория (HTTPS или SSH; для использования SSH требуется SSH-ключ)

3. Открыть терминал.

4. Перейти в *пустой* каталог, где будет храниться локальная копия репозитория.

5. Ввести команду git clone:

``` git clone <URL удаленного репозитория>```

При успешном исполнении команды git clone будет выдано сообщение вида:

```
$ git clone <URL удаленного репозитория>
> Cloning into <имя каталога>...
> remote: Counting objects: 10, done.
> remote: Compressing objects: 100% (8/8), done.
> remove: Total 10 (delta 1), reused 10 (delta 1)
> Unpacking objects: 100% (10/10), done.
```

### Добавление SSH-ключа

Для добавления SSH-ключа к аккаунту на GitHub:

1. Открыть терминал.

2. Ввести команду:

``` ssh-keygen -o <путь до каталога, где будет сгенерирован ключ>/id_rsa```

По указанному пути будут созданы два ключа:

  - id_rsa - приватный ключ;

  - id_rsa_pub - публичный ключ.

3. Перейти на [сайт Github](GitHub.com) 

4. Открыть меню в правом верхнем углу и выбрать Settings -> "SSH and GPG keys" -> "New SSH Key"

5. В открывшейся форме:

    - в поле Title - ввести произвольное название ключа
    - в поле Key - скопировать содержимое файла id_rsa_pub

6. Нажать Add

7. Для проверки что ключ работает перейти в терминал и ввести команду:

```eval "$(ssh-agent -s)"```

Команда может не исполниться в Windows PowerShell. В этом случае следует выдать ее в bash.

8. Для добавления ключа к локальному репозиторию, выдать команду:

``` ssh-keygen -o <путь до каталога, где сгенерирован ключ>```

### Установление связи между локальным и удаленным репозиторием

Для установления связи между локальным и удаленным репозиторием перейдите в локальный репозиторий и выдайте следующую последовательность команд:

```
git remote add origin <URL удаленного репозитория>
git branch -M main
git push -u origin main
```

Для удаления связи между локальным и удаленным репозиторием выдайте следующую команду:

```git remote rm origin ```

Для смены удаленного репозитория выдайте следующую команду:

```git remote set-url origin <URL удаленного репозитория> ```

После того, как установлена связь между локальным и удаленным репозиторием, можно:

- загружать коммиты из локального репозитория в удаленный командой ```git push```;

- загружать коммиты из удаленного репозитория в локальный командой ```git pull```.

### Загрузка коммитов из локального репозитория в удаленный

Для загрузки коммитов из локального репозитория в удаленный выдайте команду:

```git push```

При этом коммиты из всех ветвей локального репозитория будут загружены в соответствующие ветви удаленного репозитория

### Загрузка коммитов из удаленного репозитория в локальный

Для загрузки коммитов из удаленного репозитория в локальный выдайте команду:

```git pull```

При этом коммиты из всех ветвей удаленного репозитория будут загружены в соответствующие ветви локального репозитория

### Выполнение пулл-реквестов

Для возможности выполнения пулл-реквестов в "чужой" репозиторий следует:

1. Перейти на [сайт Github](GitHub.com) в репозиторий проекта, с которым вы хотите работать.

2. Клонировать репозиторий кнопкой **Fork**. При этом будет создана копия (форк) репозитория в вашем аккаунте.

3. Клонировать форк на свою машину командой ``` git clone <URL форка>```

4. Перейти во вновь созданный каталог репозитория.

5. Создать новую ветку репозитория командой ```git switch <имя ветки>```

6. Ввести изменения в новую ветку репозитория командой ```git add <имя файла>``` или ```git add .```

6. Закоммитить изменения командой ```git commit -m "<комментарий>"```

7. Загрузить изменения в свой форк командой ```git push```

8. Перейти на [сайт Github](GitHub.com) в свой форк.

9. Нажать кнопку "Compare & pull request"

